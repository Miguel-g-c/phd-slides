---
import CodeBlock from "../components/CodeBlock.astro";
import Slide from "../components/Slide.astro";
import SpeakerNote from "../components/SpeakerNote.astro";
import ScenarioBars from "../components/ScenarioBars.astro";
import CodeSnippet from "../components/CodeSnippet.astro";
import ThreeParetoFront from "../components/ThreeParetoFront.astro";
import TwoParetoFront from "../components/TwoParetoFront.astro";
import Layout from "../layouts/Layout.astro";

import { getCollection, getEntry } from "astro:content";
import Portrait from "../slides/Portrait.astro";
import Methodology from "../slides/Methodology.astro";
import Motivation from "../slides/Motivation.astro";
import DeckIndex from "../components/DeckIndex.astro";
import Objectives from "../slides/Objectives.astro";
import StateOfTheArt from "../slides/StateOfTheArt.astro";
import Tool from "../slides/Tool.astro";
import CaseStudy1 from "../slides/CaseStudy1.astro";

function parseSnippet(snippet) {
  return {
    language: snippet.data.language,
    highlightLines: snippet.data.highlightLines,
    code: snippet.body.replace(/```py/, "").replace(/```/, ""),
  };
}

const snippets = (await getCollection("snippets")).reduce((acc, snippet) => {
  acc[snippet.slug] = parseSnippet(snippet);
  return acc;
}, {});

const moop2 = await getEntry("moops", "case1/moop2");
const moop3 = await getEntry("moops", "case2/moop2");
const scenarios = await getEntry("moops", "case2/moop3");
const scenarioNames = [
  "Reference case",
  "Scenario 1",
  "Scenario 2",
  "Scenario 3",
  "Scenario 4",
];
const colors = ["#5ca7e4", "#addb67", "#c792ea", "#F78C6C", "#ecc48d"];
---

<Layout
  title="Una Nueva Herramienta Integrada y Holística para el Eco-Diseño de Procesos Industriales"
  description="Sitio web de la defensa de doctorado para 'Una Nueva Herramienta Integrada y Holística para el Eco-Diseño de Procesos Industriales' por Miguel García Casas. Éste presenta una investigación que integra la simulación de procesos, el análisis del ciclo de vida (ACV) y el coste del ciclo de vida (ACCV) para la optimización basada en la sostenibilidad de los procesos industriales."
  author="Miguel García Casas"
>
  <Portrait />
  <Slide>
    <DeckIndex animate />
  </Slide>
  <Slide>
    <DeckIndex active="1" />
  </Slide>
  <Motivation />
  <Slide>
    <DeckIndex active="2" />
  </Slide>
  <Objectives />
  <Slide>
    <DeckIndex active="3" />
  </Slide>
  <StateOfTheArt />
  <Slide>
    <DeckIndex active="4" />
  </Slide>
  <Methodology />
  <Slide>
    <DeckIndex active="5" />
    <SpeakerNote>
      La metodología se integra en una herramienta, un software que facilita su
      integración y aplicabilidad. Ya que apliacarla a mano sería una locura, al
      igual que sucede con el ACV. Sin software especializado, los
      profesionales, perdonarme la expresión, se morirían de asco batallando con
      un Excel.
    </SpeakerNote>
  </Slide>
  <Tool />
  <Slide>
    <DeckIndex active="6" />
    <SpeakerNote>
      El marco metodológico y la herramienta propuestos para el ecodiseño de
      procesos industriales se han validado en varios casos prácticos, en la
      tesis se han incluido 2. El primero se refiere a la metanación de dióxido
      de carbono para el almacenamiento de energía eólica en la red de gas
      natural. Este estudio se utiliza para demostrar las características clave
      de la herramienta eco2des y orientar sobre su aplicación. El segundo caso
      de estudio trata la producción de combustibles sintéticos a partir de
      biomasa. Un caso más complejo para mostrar la capacidad de eco2des para
      proporcionar diseños sostenibles y conclusiones fiables sobre tecnologías
      novedosas.
    </SpeakerNote>
  </Slide>
  <Slide>
    <DeckIndex active="6.1" />
    <SpeakerNote> Abordemos el primero de ellos... </SpeakerNote>
  </Slide>
  <CaseStudy1 />

  <Slide>
    <h1>Slide 1</h1>
    <CodeSnippet content={snippets["define_optimization_problem"]} />
    <SpeakerNote>Just a note</SpeakerNote>
  </Slide>
  <Slide>
    <h1>Slide 2</h1>
    <p>This is a paragraph</p>
  </Slide>
  <Slide>
    <ScenarioBars
      id={scenarios.id}
      objectives={scenarios.data.objectives}
      decisionVariables={scenarios.data.decisionVariables}
      scenarioNames={scenarioNames}
      colors={colors}
    />
  </Slide>
</Layout>
